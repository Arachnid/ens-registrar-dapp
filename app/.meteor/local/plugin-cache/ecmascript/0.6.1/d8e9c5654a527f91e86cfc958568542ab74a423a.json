{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"/imports/lib/ethereum","imported":["registrar"],"specifiers":[{"kind":"named","imported":"registrar","local":"registrar"}]},{"source":"/imports/lib/helpers/helperFunctions","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"Helpers"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/imports/templates/status/finalize-button.js","filenameRelative":"/imports/templates/status/finalize-button.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/templates/status/finalize-button.js.map","sourceFileName":"/imports/templates/status/finalize-button.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"finalize-button"},"ignored":false,"code":"var registrar;module.import('/imports/lib/ethereum',{\"registrar\":function(v){registrar=v}});var Helpers;module.import('/imports/lib/helpers/helperFunctions',{\"default\":function(v){Helpers=v}});\n\n\nTemplate['finalizeButton'].events({\n  'click .finalize': function () {\n    function clickFinalize() {\n      var name = Session.get('searched');\n      var template = Template.instance();\n      var accounts = EthAccounts.find().fetch();\n\n      if (accounts.length == 0) {\n        alert('No accounts added to dapp');\n        return;\n      }\n      TemplateVar.set(template, 'finalizing', true);\n      registrar.finalizeAuction(name, {\n        from: accounts[0].address,\n        gas: 1000000\n      }, function (err, txid) {\n        if (err) {\n          alert(err);\n          TemplateVar.set(template, 'finalizing', false);\n          return;\n        }\n        console.log(txid);\n        Helpers.checkTxSuccess(txid, function (err, isSuccessful) {\n          if (err) {\n            alert(err);\n            TemplateVar.set(template, 'finalizing', false);\n            return;\n          }\n          if (isSuccessful) {\n            Helpers.refreshStatus();\n          } else {\n            alert('Finalizing the auction failed');\n          }\n          TemplateVar.set(template, 'finalizing', false);\n        });\n      });\n    }\n\n    return clickFinalize;\n  }()\n});\n\nTemplate['finalizeButton'].helpers({\n  finalizing: function () {\n    function finalizing() {\n      return TemplateVar.get('finalizing');\n    }\n\n    return finalizing;\n  }()\n});","ast":null,"map":{"version":3,"sources":["/imports/templates/status/finalize-button.js"],"names":["registrar","Helpers","Template","events","name","Session","get","template","instance","accounts","EthAccounts","find","fetch","length","alert","TemplateVar","set","finalizeAuction","from","address","gas","err","txid","console","log","checkTxSuccess","isSuccessful","refreshStatus","helpers","finalizing"],"mappings":"AAAA,SAASA,SAAT,QAA0B,uBAA1B;AACA,OAAOC,OAAP,MAAoB,sCAApB;;AAEAC,SAAS,gBAAT,EAA2BC,MAA3B,CAAkC;AAChC;AAAmB,6BAAW;AAC5B,UAAMC,OAAOC,QAAQC,GAAR,CAAY,UAAZ,CAAb;AACA,UAAMC,WAAWL,SAASM,QAAT,EAAjB;AACA,UAAIC,WAAWC,YAAYC,IAAZ,GAAmBC,KAAnB,EAAf;;AAEA,UAAIH,SAASI,MAAT,IAAmB,CAAvB,EAA0B;AACxBC,cAAM,2BAAN;AACA;AACD;AACDC,kBAAYC,GAAZ,CAAgBT,QAAhB,EAA0B,YAA1B,EAAwC,IAAxC;AACAP,gBAAUiB,eAAV,CAA0Bb,IAA1B,EAAgC;AAC9Bc,cAAMT,SAAS,CAAT,EAAYU,OADY;AAE9BC,aAAK;AAFyB,OAAhC,EAGG,UAACC,GAAD,EAAMC,IAAN,EAAe;AAChB,YAAID,GAAJ,EAAS;AACPP,gBAAMO,GAAN;AACAN,sBAAYC,GAAZ,CAAgBT,QAAhB,EAA0B,YAA1B,EAAwC,KAAxC;AACA;AACD;AACDgB,gBAAQC,GAAR,CAAYF,IAAZ;AACArB,gBAAQwB,cAAR,CAAuBH,IAAvB,EAA6B,UAACD,GAAD,EAAMK,YAAN,EAAuB;AAClD,cAAIL,GAAJ,EAAS;AACPP,kBAAMO,GAAN;AACAN,wBAAYC,GAAZ,CAAgBT,QAAhB,EAA0B,YAA1B,EAAwC,KAAxC;AACA;AACD;AACD,cAAImB,YAAJ,EAAkB;AAChBzB,oBAAQ0B,aAAR;AACD,WAFD,MAEO;AACLb,kBAAM,+BAAN;AACD;AACDC,sBAAYC,GAAZ,CAAgBT,QAAhB,EAA0B,YAA1B,EAAwC,KAAxC;AACD,SAZD;AAaD,OAvBD;AAwBD;;AAlCD;AAAA;AADgC,CAAlC;;AAsCAL,SAAS,gBAAT,EAA2B0B,OAA3B,CAAmC;AACjCC,YADiC;AAAA,0BACpB;AACX,aAAOd,YAAYT,GAAZ,CAAgB,YAAhB,CAAP;AACD;;AAHgC;AAAA;AAAA,CAAnC","file":"/imports/templates/status/finalize-button.js.map","sourcesContent":["import { registrar } from '/imports/lib/ethereum';\nimport Helpers from '/imports/lib/helpers/helperFunctions';\n\nTemplate['finalizeButton'].events({\n  'click .finalize': function() {\n    const name = Session.get('searched');\n    const template = Template.instance();\n    let accounts = EthAccounts.find().fetch();\n    \n    if (accounts.length == 0) {\n      alert('No accounts added to dapp');\n      return;\n    }\n    TemplateVar.set(template, 'finalizing', true);\n    registrar.finalizeAuction(name, {\n      from: accounts[0].address,\n      gas: 1000000\n    }, (err, txid) => {\n      if (err) {\n        alert(err)\n        TemplateVar.set(template, 'finalizing', false);\n        return;\n      }\n      console.log(txid)\n      Helpers.checkTxSuccess(txid, (err, isSuccessful) => {\n        if (err) {\n          alert(err)\n          TemplateVar.set(template, 'finalizing', false)\n          return;\n        }\n        if (isSuccessful) {\n          Helpers.refreshStatus();\n        } else {\n          alert('Finalizing the auction failed')\n        }\n        TemplateVar.set(template, 'finalizing', false)\n      });\n    })\n  }\n})\n\nTemplate['finalizeButton'].helpers({\n  finalizing() {\n    return TemplateVar.get('finalizing');\n  }\n})"]},"hash":"d8e9c5654a527f91e86cfc958568542ab74a423a"}
