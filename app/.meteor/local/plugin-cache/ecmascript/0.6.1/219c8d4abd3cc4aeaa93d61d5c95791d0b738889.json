{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"/imports/lib/ethereum","imported":["ens"],"specifiers":[{"kind":"named","imported":"ens","local":"ens"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/imports/templates/status/owned.js","filenameRelative":"/imports/templates/status/owned.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/templates/status/owned.js.map","sourceFileName":"/imports/templates/status/owned.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"owned"},"ignored":false,"code":"var ens;module.import('/imports/lib/ethereum',{\"ens\":function(v){ens=v}});\n\nTemplate['status-owned'].onCreated(function () {\n  var _this = this;\n\n  TemplateVar.set(this, 'entryData', Template.instance().data.entry);\n\n  var name = Template.instance().data.name;\n  TemplateVar.set(this, 'owner', ens.owner(name));\n  ens.resolver(name, function (err, res) {\n    if (!err) {\n      TemplateVar.set(_this, 'address', res.addr());\n      TemplateVar.set(_this, 'content', res.content());\n    }\n  });\n\n  console.log('entry', Template.instance().data.entry);\n});\n\nTemplate['status-owned'].helpers({\n  address: function () {\n    function address() {\n      return TemplateVar.get('address');\n    }\n\n    return address;\n  }(),\n  owner: function () {\n    function owner() {\n      return TemplateVar.get('owner');\n    }\n\n    return owner;\n  }(),\n  registrationDate: function () {\n    function registrationDate() {\n      var date = new Date(TemplateVar.get('entryData').registrationDate * 1000);\n      return date.toLocaleString();\n    }\n\n    return registrationDate;\n  }(),\n  deedValue: function () {\n    function deedValue() {\n      var val = TemplateVar.get('entryData').deed.balance;\n      return web3.fromWei(val.toFixed(), 'ether');\n    }\n\n    return deedValue;\n  }(),\n  deedValueIsMin: function () {\n    function deedValueIsMin() {\n      var val = TemplateVar.get('entryData').deed.balance;\n      return val.toFixed() == 10000000000000000;\n    }\n\n    return deedValueIsMin;\n  }(),\n  renewalDate: function () {\n    function renewalDate() {\n      var years = 365 * 24 * 60 * 60 * 1000;\n      var date = new Date(TemplateVar.get('entryData').registrationDate * 1000 + 2 * years);\n      return date.toLocaleDateString();\n    }\n\n    return renewalDate;\n  }(),\n  highestBid: function () {\n    function highestBid() {\n      var val = TemplateVar.get('entryData').highestBid;\n      return web3.fromWei(val, 'ether');\n    }\n\n    return highestBid;\n  }(),\n  content: function () {\n    function content() {\n      return TemplateVar.get('content') == '0x' ? 'not set' : TemplateVar.get('content');\n    }\n\n    return content;\n  }()\n});\n\nTemplate['aside-owned'].helpers({\n  deedValue: function () {\n    function deedValue() {\n      var val = Template.instance().data.entry.deed.balance;\n      return web3.fromWei(val.toFixed(), 'ether');\n    }\n\n    return deedValue;\n  }()\n});","ast":null,"map":{"version":3,"sources":["/imports/templates/status/owned.js"],"names":["ens","Template","onCreated","TemplateVar","set","instance","data","entry","name","owner","resolver","err","res","addr","content","console","log","helpers","address","get","registrationDate","date","Date","toLocaleString","deedValue","val","deed","balance","web3","fromWei","toFixed","deedValueIsMin","renewalDate","years","toLocaleDateString","highestBid"],"mappings":"AAAA,SAASA,GAAT,QAAoB,uBAApB;;AAEAC,SAAS,cAAT,EAAyBC,SAAzB,CAAmC,YAAW;AAAA;;AAC5CC,cAAYC,GAAZ,CAAgB,IAAhB,EAAsB,WAAtB,EAAmCH,SAASI,QAAT,GAAoBC,IAApB,CAAyBC,KAA5D;;AAEA,MAAIC,OAAOP,SAASI,QAAT,GAAoBC,IAApB,CAAyBE,IAApC;AACAL,cAAYC,GAAZ,CAAgB,IAAhB,EAAsB,OAAtB,EAA+BJ,IAAIS,KAAJ,CAAUD,IAAV,CAA/B;AACAR,MAAIU,QAAJ,CAAaF,IAAb,EAAmB,UAACG,GAAD,EAAMC,GAAN,EAAc;AAC/B,QAAI,CAACD,GAAL,EAAU;AACRR,kBAAYC,GAAZ,QAAsB,SAAtB,EAAiCQ,IAAIC,IAAJ,EAAjC;AACAV,kBAAYC,GAAZ,QAAsB,SAAtB,EAAiCQ,IAAIE,OAAJ,EAAjC;AACD;AACF,GALD;;AAOAC,UAAQC,GAAR,CAAY,OAAZ,EAAqBf,SAASI,QAAT,GAAoBC,IAApB,CAAyBC,KAA9C;AACD,CAbD;;AAeAN,SAAS,cAAT,EAAyBgB,OAAzB,CAAiC;AAC/BC,SAD+B;AAAA,uBACrB;AACR,aAAOf,YAAYgB,GAAZ,CAAgB,SAAhB,CAAP;AACD;;AAH8B;AAAA;AAI/BV,OAJ+B;AAAA,qBAIvB;AACN,aAAON,YAAYgB,GAAZ,CAAgB,OAAhB,CAAP;AACD;;AAN8B;AAAA;AAO/BC,kBAP+B;AAAA,gCAOZ;AACjB,UAAIC,OAAO,IAAIC,IAAJ,CAASnB,YAAYgB,GAAZ,CAAgB,WAAhB,EAA6BC,gBAA7B,GAAgD,IAAzD,CAAX;AACA,aAAOC,KAAKE,cAAL,EAAP;AACD;;AAV8B;AAAA;AAW/BC,WAX+B;AAAA,yBAWnB;AACV,UAAIC,MAAMtB,YAAYgB,GAAZ,CAAgB,WAAhB,EAA6BO,IAA7B,CAAkCC,OAA5C;AACA,aAAOC,KAAKC,OAAL,CAAaJ,IAAIK,OAAJ,EAAb,EAA4B,OAA5B,CAAP;AACD;;AAd8B;AAAA;AAe/BC,gBAf+B;AAAA,8BAed;AACf,UAAIN,MAAMtB,YAAYgB,GAAZ,CAAgB,WAAhB,EAA6BO,IAA7B,CAAkCC,OAA5C;AACA,aAAOF,IAAIK,OAAJ,MAAiB,iBAAxB;AACD;;AAlB8B;AAAA;AAmB/BE,aAnB+B;AAAA,2BAmBjB;AACZ,UAAIC,QAAQ,MAAM,EAAN,GAAW,EAAX,GAAgB,EAAhB,GAAqB,IAAjC;AACA,UAAIZ,OAAO,IAAIC,IAAJ,CAASnB,YAAYgB,GAAZ,CAAgB,WAAhB,EAA6BC,gBAA7B,GAAgD,IAAhD,GAAuD,IAAIa,KAApE,CAAX;AACA,aAAOZ,KAAKa,kBAAL,EAAP;AACD;;AAvB8B;AAAA;AAwB/BC,YAxB+B;AAAA,0BAwBlB;AACX,UAAIV,MAAMtB,YAAYgB,GAAZ,CAAgB,WAAhB,EAA6BgB,UAAvC;AACA,aAAOP,KAAKC,OAAL,CAAaJ,GAAb,EAAkB,OAAlB,CAAP;AACD;;AA3B8B;AAAA;AA4B/BX,SA5B+B;AAAA,uBA4BrB;AACR,aAAOX,YAAYgB,GAAZ,CAAgB,SAAhB,KAA8B,IAA9B,GAAqC,SAArC,GAAiDhB,YAAYgB,GAAZ,CAAgB,SAAhB,CAAxD;AACD;;AA9B8B;AAAA;AAAA,CAAjC;;AAkCAlB,SAAS,aAAT,EAAwBgB,OAAxB,CAAgC;AAC9BO,WAD8B;AAAA,yBAClB;AACV,UAAIC,MAAMxB,SAASI,QAAT,GAAoBC,IAApB,CAAyBC,KAAzB,CAA+BmB,IAA/B,CAAoCC,OAA9C;AACA,aAAOC,KAAKC,OAAL,CAAaJ,IAAIK,OAAJ,EAAb,EAA4B,OAA5B,CAAP;AACD;;AAJ6B;AAAA;AAAA,CAAhC","file":"/imports/templates/status/owned.js.map","sourcesContent":["import { ens } from '/imports/lib/ethereum';\n\nTemplate['status-owned'].onCreated(function() {\n  TemplateVar.set(this, 'entryData', Template.instance().data.entry);\n\n  var name = Template.instance().data.name;\n  TemplateVar.set(this, 'owner', ens.owner(name))\n  ens.resolver(name, (err, res) => {\n    if (!err) {\n      TemplateVar.set(this, 'address', res.addr());\n      TemplateVar.set(this, 'content', res.content());\n    }\n  });\n\n  console.log('entry', Template.instance().data.entry);\n});\n\nTemplate['status-owned'].helpers({\n  address() {\n    return TemplateVar.get('address')\n  },\n  owner() {\n    return TemplateVar.get('owner')\n  },\n  registrationDate() {\n    var date = new Date(TemplateVar.get('entryData').registrationDate * 1000);\n    return date.toLocaleString();\n  },\n  deedValue() {\n    var val = TemplateVar.get('entryData').deed.balance;\n    return web3.fromWei(val.toFixed(), 'ether');\n  },\n  deedValueIsMin() {\n    var val = TemplateVar.get('entryData').deed.balance;\n    return val.toFixed() == 10000000000000000;\n  },\n  renewalDate() {\n    var years = 365 * 24 * 60 * 60 * 1000;\n    var date = new Date(TemplateVar.get('entryData').registrationDate * 1000 + 2 * years);\n    return date.toLocaleDateString();\n  },\n  highestBid() {\n    var val = TemplateVar.get('entryData').highestBid;\n    return web3.fromWei(val, 'ether');\n  },\n  content() {\n    return TemplateVar.get('content') == '0x' ? 'not set' : TemplateVar.get('content') ;\n  }\n})\n\n\nTemplate['aside-owned'].helpers({\n  deedValue() {\n    var val = Template.instance().data.entry.deed.balance;\n    return web3.fromWei(val.toFixed(), 'ether');\n  }\n})\n"]},"hash":"219c8d4abd3cc4aeaa93d61d5c95791d0b738889"}
